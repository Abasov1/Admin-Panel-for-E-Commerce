{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref, createTextVNode as _createTextVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, toDisplayString as _toDisplayString, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers, vModelSelect as _vModelSelect, resolveDirective as _resolveDirective, renderList as _renderList, Fragment as _Fragment, vShow as _vShow, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-xxl flex-grow-1 container-p-y\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"fw-bold py-3 mb-4\"\n}, \"Users\", -1);\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-xxl\"\n};\nconst _hoisted_5 = {\n  class: \"card mb-4 position-relative\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  style: {\n    \"position\": \"absolute\",\n    \"z-index\": \"99999\",\n    \"width\": \"100%\",\n    \"height\": \"100%\",\n    \"background-color\": \"white\",\n    \"opacity\": \"50%\"\n  }\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-header d-flex align-items-center justify-content-between\"\n}, [/*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"mb-0\"\n}, \"Product input\")], -1);\nconst _hoisted_8 = {\n  class: \"card-body\"\n};\nconst _hoisted_9 = [\"onSubmit\"];\nconst _hoisted_10 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_11 = {\n  class: \"col-sm-2 col-form-label\",\n  for: \"basic-default-name\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  style: {\n    \"color\": \"yellow\"\n  }\n};\nconst _hoisted_13 = {\n  key: 1,\n  style: {\n    \"color\": \"rgb(255,62,29)\"\n  }\n};\nconst _hoisted_14 = {\n  class: \"col-sm-10\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_16 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_17 = {\n  class: \"col-sm-2 col-form-label\",\n  for: \"basic-default-name\"\n};\nconst _hoisted_18 = {\n  key: 0,\n  style: {\n    \"color\": \"yellow\"\n  }\n};\nconst _hoisted_19 = {\n  key: 1,\n  style: {\n    \"color\": \"rgb(255,62,29)\"\n  }\n};\nconst _hoisted_20 = {\n  class: \"col-sm-10\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_22 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_23 = {\n  class: \"col-sm-2 col-form-label\",\n  for: \"basic-default-name\"\n};\nconst _hoisted_24 = {\n  key: 0,\n  style: {\n    \"color\": \"yellow\"\n  }\n};\nconst _hoisted_25 = {\n  key: 1,\n  style: {\n    \"color\": \"rgb(255,62,29)\"\n  }\n};\nconst _hoisted_26 = {\n  class: \"col-sm-10\"\n};\nconst _hoisted_27 = {\n  key: 0,\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_28 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_29 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"col-sm-2 col-form-label\",\n  for: \"basic-default-name\"\n}, \"Is Moderator\", -1);\nconst _hoisted_30 = {\n  class: \"col-sm-10\"\n};\nconst _hoisted_31 = /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-primary\"\n}, \"Send\", -1);\nconst _hoisted_32 = {\n  key: 0,\n  class: \"card pt-4\"\n};\nconst _hoisted_33 = {\n  class: \"card-datatable table-responsive\"\n};\nconst _hoisted_34 = {\n  id: \"DataTables_Table_0_wrapper\",\n  class: \"dataTables_wrapper dt-bootstrap5 no-footer\"\n};\nconst _hoisted_35 = {\n  class: \"row\"\n};\nconst _hoisted_36 = {\n  class: \"col-sm-12 col-md-6\"\n};\nconst _hoisted_37 = {\n  class: \"dataTables_length\",\n  id: \"DataTables_Table_0_length\"\n};\nconst _hoisted_38 = {\n  class: \"row d-flex justify-content-center align-items-center\"\n};\nconst _hoisted_39 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-1 d-flex justify-content-center align-items-center\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", null, \"Show\")], -1);\nconst _hoisted_40 = {\n  class: \"col-4 d-flex justify-content-center align-items-center\"\n};\nconst _hoisted_41 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"1\\\">1</option><option value=\\\"10\\\">10</option><option value=\\\"25\\\">25</option><option value=\\\"50\\\">50</option><option value=\\\"75\\\">75</option><option value=\\\"100\\\">100</option>\", 6);\nconst _hoisted_47 = [_hoisted_41];\nconst _hoisted_48 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-6 d-flex justify-content-start\"\n}, \" entries \", -1);\nconst _hoisted_49 = {\n  class: \"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end\"\n};\nconst _hoisted_50 = {\n  id: \"DataTables_Table_0_filter\",\n  class: \"dataTables_filter\"\n};\nconst _hoisted_51 = {\n  class: \"row d-flex justify-content-center align-items-center\"\n};\nconst _hoisted_52 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-1 d-flex justify-content-center align-items-center\"\n}, [/*#__PURE__*/_createElementVNode(\"label\", null, \"Search:\")], -1);\nconst _hoisted_53 = {\n  class: \"col-10\"\n};\nconst _hoisted_54 = {\n  class: \"datatables-basic table border-top\"\n};\nconst _hoisted_55 = /*#__PURE__*/_createElementVNode(\"th\", null, \"id\", -1);\nconst _hoisted_56 = /*#__PURE__*/_createElementVNode(\"th\", null, \"Email\", -1);\nconst _hoisted_57 = /*#__PURE__*/_createElementVNode(\"th\", null, \"Role\", -1);\nconst _hoisted_58 = /*#__PURE__*/_createElementVNode(\"th\", null, \"Actions\", -1);\nconst _hoisted_59 = /*#__PURE__*/_createElementVNode(\"td\", {\n  class: \"dt-checkboxes-cell\"\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"checkbox\",\n  class: \"dt-checkboxes form-check-input\"\n})], -1);\nconst _hoisted_60 = {\n  style: {\n    \"cursor\": \"pointer\",\n    \"overflow\": \"hidden\"\n  }\n};\nconst _hoisted_61 = {\n  class: \"d-flex justify-content-start align-items-center user-name\"\n};\nconst _hoisted_62 = {\n  class: \"d-flex flex-column\",\n  style: {\n    \"overflow\": \"hidden\",\n    \"max-width\": \"100px\"\n  }\n};\nconst _hoisted_63 = {\n  class: \"emp_name text-truncate\"\n};\nconst _hoisted_64 = [\"onClick\"];\nconst _hoisted_65 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bx bxs-trash\"\n}, null, -1);\nconst _hoisted_66 = [_hoisted_65];\nconst _hoisted_67 = [\"onClick\"];\nconst _hoisted_68 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"bx bxs-edit\"\n}, null, -1);\nconst _hoisted_69 = [_hoisted_68];\nconst _hoisted_70 = {\n  class: \"row\",\n  style: {\n    \"padding-left\": \"40px\",\n    \"padding-top\": \"20px\"\n  }\n};\nconst _hoisted_71 = {\n  class: \"col-sm-12 col-md-6\"\n};\nconst _hoisted_72 = {\n  class: \"dataTables_info\",\n  id: \"DataTables_Table_0_info\",\n  role: \"status\",\n  \"aria-live\": \"polite\"\n};\nconst _hoisted_73 = {\n  class: \"col-sm-12 col-md-6\"\n};\nconst _hoisted_74 = {\n  class: \"dataTables_paginate paging_simple_numbers\",\n  id: \"DataTables_Table_0_paginate\"\n};\nconst _hoisted_75 = {\n  class: \"pagination\"\n};\nconst _hoisted_76 = [\"onClick\"];\nconst _hoisted_77 = {\n  key: 0,\n  class: \"paginate_button page-item disabled\",\n  id: \"DataTables_Table_0_ellipsis\"\n};\nconst _hoisted_78 = /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#\",\n  \"aria-controls\": \"DataTables_Table_0\",\n  \"data-dt-idx\": \"ellipsis\",\n  tabindex: \"0\",\n  class: \"page-link\"\n}, \"…\", -1);\nconst _hoisted_79 = [_hoisted_78];\nconst _hoisted_80 = {\n  class: \"paginate_button page-item\"\n};\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport store from '../../store';\nimport router from '../../router';\nimport axios from 'axios';\nimport { useVuelidate } from '@vuelidate/core';\nimport { required, email } from '@vuelidate/validators';\nexport default {\n  __name: 'User',\n  setup(__props) {\n    const loading = ref(false);\n    const users = ref(false);\n    const pagesCount = ref('');\n    const userCount = ref('');\n    const url = store.state.api;\n    const page = reactive({\n      page: 1,\n      search: '',\n      perPage: '10',\n      order: false,\n      orderBy: true\n    });\n    watch(() => page.perPage, () => {\n      page.page = 1;\n      loadUsers();\n    });\n    const selected = reactive({\n      name: '',\n      email: '',\n      password: '',\n      is_moderator: false,\n      id: null\n    });\n    const rules = {\n      name: {\n        required\n      },\n      email: {\n        required,\n        email\n      },\n      password: {\n        required\n      }\n    };\n    const v$ = useVuelidate(rules, selected);\n    onMounted(() => {\n      if (store.state.user.data.length != 0) {\n        if (store.state.user.data.role === 'moderator') {\n          router.push({\n            name: 'Product'\n          });\n        }\n      }\n      loadUsers();\n    });\n    const makeUser = () => {\n      if (loading.value) {\n        return;\n      }\n      v$.value.$validate();\n      if (v$.value.$error) {\n        return;\n      }\n      loading.value = true;\n      store.dispatch('adduser', selected).then(async () => {\n        page.order = false;\n        await loadUsers();\n        loading.value = false;\n      }).catch(() => {\n        loading.value = false;\n      });\n    };\n    const loadUsers = async () => {\n      await axios.post(url + 'loadusers', page, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('TOKEN')\n        }\n      }).then(response => {\n        users.value = response.data.users.data;\n        pagesCount.value = response.data.last;\n        userCount.value = response.data.count;\n      });\n    };\n    const reset = () => {\n      selected.name = '';\n      selected.email = '';\n      selected.password = '';\n      selected.id = false;\n      selected.is_moderator = false;\n      v$.value.$reset();\n    };\n    const deletE = async id => {\n      if (window.confirm('Are you sure?')) {\n        await axios.post(url + 'deleteuser/' + id, null, {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('TOKEN')\n          }\n        }).then(repsonse => {\n          alert(repsonse.data.message);\n          loadUsers();\n        }).catch(error => {\n          alert(error.response.data.message);\n        });\n      }\n    };\n    const editE = user => {\n      reset();\n      selected.id = user.id;\n      selected.name = user.name;\n      selected.email = user.email;\n      if (user.role === 'moderator') {\n        selected.is_moderator = true;\n      }\n    };\n    const changePage = n => {\n      page.page = n;\n      loadUsers();\n    };\n    const searchUsers = () => {\n      page.page = 1;\n      loadUsers();\n    };\n    return (_ctx, _cache) => {\n      const _directive_debounce = _resolveDirective(\"debounce\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [loading.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6)) : _createCommentVNode(\"\", true), _hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"form\", {\n        onSubmit: _withModifiers(makeUser, [\"prevent\"])\n      }, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"label\", _hoisted_11, [_createTextVNode(\"Name\"), selected.id && !_unref(v$).name.$error ? (_openBlock(), _createElementBlock(\"b\", _hoisted_12, \" - updating\")) : _createCommentVNode(\"\", true), _unref(v$).name.$error ? (_openBlock(), _createElementBlock(\"b\", _hoisted_13, \" - required\")) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_14, [_withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => selected.name = $event),\n        type: \"text\",\n        class: _normalizeClass([\"form-control\", [_unref(v$).name.$error ? 'is-invalid' : '']]),\n        id: \"basic-default-name\",\n        placeholder: \"John Doe\"\n      }, null, 2), [[_vModelText, selected.name]]), _unref(v$).name.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_15, _toDisplayString(_unref(v$).name.$errors[0].$message), 1)) : _createCommentVNode(\"\", true)])]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"label\", _hoisted_17, [_createTextVNode(\"Email\"), selected.id && !_unref(v$).email.$error ? (_openBlock(), _createElementBlock(\"b\", _hoisted_18, \" - updating\")) : _createCommentVNode(\"\", true), _unref(v$).email.$error ? (_openBlock(), _createElementBlock(\"b\", _hoisted_19, \" - required\")) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_20, [_withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => selected.email = $event),\n        type: \"text\",\n        class: _normalizeClass([\"form-control\", [_unref(v$).email.$error ? 'is-invalid' : '']]),\n        id: \"basic-default-name\",\n        placeholder: \"John Doe\"\n      }, null, 2), [[_vModelText, selected.email]]), _unref(v$).email.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_21, _toDisplayString(_unref(v$).email.$errors[0].$message), 1)) : _createCommentVNode(\"\", true)])]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"label\", _hoisted_23, [_createTextVNode(\"Password\"), selected.id && !_unref(v$).password.$error ? (_openBlock(), _createElementBlock(\"b\", _hoisted_24, \" - updating\")) : _createCommentVNode(\"\", true), _unref(v$).password.$error ? (_openBlock(), _createElementBlock(\"b\", _hoisted_25, \" - required\")) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_26, [_withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => selected.password = $event),\n        type: \"text\",\n        class: _normalizeClass([\"form-control\", [_unref(v$).password.$error ? 'is-invalid' : '']]),\n        id: \"basic-default-name\",\n        placeholder: \"John Doe\"\n      }, null, 2), [[_vModelText, selected.password]]), _unref(v$).password.$error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_27, _toDisplayString(_unref(v$).password.$errors[0].$message), 1)) : _createCommentVNode(\"\", true)])]), _createElementVNode(\"div\", _hoisted_28, [_hoisted_29, _createElementVNode(\"div\", _hoisted_30, [_withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => selected.is_moderator = $event),\n        type: \"checkbox\",\n        class: \"dt-checkboxes form-check-input\"\n      }, null, 512), [[_vModelCheckbox, selected.is_moderator]])])]), _createElementVNode(\"div\", {\n        class: \"row justify-content-end\"\n      }, [_createElementVNode(\"div\", {\n        class: \"col-sm-10\"\n      }, [_hoisted_31, _createElementVNode(\"button\", {\n        onClick: reset,\n        type: \"button\",\n        class: \"btn btn-primary ms-2\"\n      }, \"Reset\")])])], 40, _hoisted_9)])])])]), users.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [_createElementVNode(\"div\", _hoisted_33, [_createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"div\", _hoisted_38, [_hoisted_39, _createElementVNode(\"div\", _hoisted_40, [_withDirectives(_createElementVNode(\"select\", {\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => page.perPage = $event),\n        name: \"DataTables_Table_0_length\",\n        \"aria-controls\": \"DataTables_Table_0\",\n        class: \"form-select\"\n      }, _hoisted_47, 512), [[_vModelSelect, page.perPage]])]), _hoisted_48])])]), _createElementVNode(\"div\", _hoisted_49, [_createElementVNode(\"div\", _hoisted_50, [_createElementVNode(\"div\", _hoisted_51, [_hoisted_52, _createElementVNode(\"div\", _hoisted_53, [_withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => page.search = $event),\n        type: \"search\",\n        class: \"form-control\",\n        placeholder: \"\",\n        \"aria-controls\": \"DataTables_Table_0\"\n      }, null, 512), [[_vModelText, page.search], [_directive_debounce, searchUsers, \"400ms\"]])])])])])]), _createElementVNode(\"table\", _hoisted_54, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_hoisted_55, _createElementVNode(\"th\", {\n        onClick: _cache[6] || (_cache[6] = (...args) => _ctx.order && _ctx.order(...args)),\n        class: \"d-flex justify-content-between\"\n      }, [_createTextVNode(\"Name \"), _createElementVNode(\"i\", {\n        style: {\n          \"color\": \"rgb(187,195,204)\"\n        },\n        class: _normalizeClass([page.orderBy ? 'bx bxs-chevron-up' : 'bx bxs-chevron-down'])\n      }, null, 2)]), _hoisted_56, _hoisted_57, _hoisted_58])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(users.value, user => {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          key: user.id\n        }, [_hoisted_59, _createElementVNode(\"td\", _hoisted_60, [_createElementVNode(\"div\", _hoisted_61, [_createElementVNode(\"div\", _hoisted_62, [_createElementVNode(\"span\", _hoisted_63, _toDisplayString(user.name), 1)])])]), _createElementVNode(\"td\", null, _toDisplayString(user.email), 1), _createElementVNode(\"td\", null, _toDisplayString(user.role), 1), _createElementVNode(\"td\", null, [_createElementVNode(\"a\", {\n          onClick: _withModifiers($event => deletE(user.id), [\"prevent\"]),\n          class: \"btn btn-sm btn-icon item-edit\"\n        }, _hoisted_66, 8, _hoisted_64), _createElementVNode(\"a\", {\n          onClick: _withModifiers($event => editE(user), [\"prevent\"]),\n          href: \"javascript:;\",\n          class: \"btn btn-sm btn-icon item-edit\"\n        }, _hoisted_69, 8, _hoisted_67)])]);\n      }), 128))])]), _createElementVNode(\"div\", _hoisted_70, [_createElementVNode(\"div\", _hoisted_71, [_createElementVNode(\"div\", _hoisted_72, \"Showing \" + _toDisplayString(page.page) + \" to \" + _toDisplayString(page.perPage) + \" of \" + _toDisplayString(userCount.value) + \" products\", 1)]), _createElementVNode(\"div\", _hoisted_73, [_createElementVNode(\"div\", _hoisted_74, [_createElementVNode(\"ul\", _hoisted_75, [_createElementVNode(\"li\", {\n        class: _normalizeClass([\"paginate_button page-item previous\", [page.page === 1 ? 'disabled' : '']]),\n        id: \"DataTables_Table_0_previous\"\n      }, [_createElementVNode(\"a\", {\n        onClick: _cache[7] || (_cache[7] = _withModifiers((...args) => _ctx.previousPage && _ctx.previousPage(...args), [\"prevent\"])),\n        href: \"#\",\n        \"aria-controls\": \"DataTables_Table_0\",\n        \"data-dt-idx\": \"previous\",\n        tabindex: \"0\",\n        class: \"page-link\"\n      }, \"Previous\")], 2), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pagesCount.value, n => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          key: n,\n          class: \"paginate_button page-item active\"\n        }, [_withDirectives(_createElementVNode(\"a\", {\n          onClick: _withModifiers($event => changePage(n), [\"prevent\"]),\n          href: \"#\",\n          \"aria-controls\": \"DataTables_Table_0\",\n          \"data-dt-idx\": \"1\",\n          tabindex: \"0\",\n          class: \"page-link\",\n          style: _normalizeStyle([page.page == n ? 'background-color:rgb(105,108,255);color:white;' : 'background-color:rgb(240,242,244);color:rgb(105,122,141);'])\n        }, _toDisplayString(n), 13, _hoisted_76), [[_vShow, n < page.page + 5 && page.page < n + 2 && n != pagesCount.value]])]);\n      }), 128)), pagesCount.value - page.page > 5 ? (_openBlock(), _createElementBlock(\"li\", _hoisted_77, _hoisted_79)) : _createCommentVNode(\"\", true), _createElementVNode(\"li\", _hoisted_80, [_createElementVNode(\"a\", {\n        onClick: _cache[8] || (_cache[8] = _withModifiers($event => changePage(pagesCount.value), [\"prevent\"])),\n        href: \"#\",\n        \"aria-controls\": \"DataTables_Table_0\",\n        \"data-dt-idx\": \"14\",\n        tabindex: \"0\",\n        class: \"page-link\",\n        style: _normalizeStyle([page.page === pagesCount.value ? 'background-color:rgb(105,108,255);color:white;' : 'background-color:rgb(240,242,244);color:rgb(105,122,141);'])\n      }, _toDisplayString(pagesCount.value), 5)]), _createElementVNode(\"li\", {\n        class: _normalizeClass([\"paginate_button page-item next\", [page.page === pagesCount.value ? 'disabled' : '']]),\n        id: \"DataTables_Table_0_next\"\n      }, [_createElementVNode(\"a\", {\n        onClick: _cache[9] || (_cache[9] = _withModifiers((...args) => _ctx.nextPage && _ctx.nextPage(...args), [\"prevent\"])),\n        href: \"#\",\n        \"aria-controls\": \"DataTables_Table_0\",\n        \"data-dt-idx\": \"next\",\n        tabindex: \"0\",\n        class: \"page-link\"\n      }, \"Next\")], 2)])])])])])])])) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","watch","onMounted","store","router","axios","useVuelidate","required","email","loading","users","pagesCount","userCount","url","state","api","page","search","perPage","order","orderBy","loadUsers","selected","name","password","is_moderator","id","rules","v$","user","data","length","role","push","makeUser","value","$validate","$error","dispatch","then","catch","post","headers","Authorization","localStorage","getItem","response","last","count","reset","$reset","deletE","window","confirm","repsonse","alert","message","error","editE","changePage","n","searchUsers"],"sources":["C:/xampp/htdocs/vue-laravel-admin/admin-panel/src/views/admin/User.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-xxl flex-grow-1 container-p-y\">\r\n        <h4 class=\"fw-bold py-3 mb-4\">Users</h4>\r\n        <div class=\"row\">\r\n            <div class=\"col-xxl\">\r\n                <div class=\"card mb-4 position-relative\">\r\n                    <div v-if=\"loading\" style=\"position:absolute;z-index:99999;width:100%;height:100%;background-color:white;opacity:50%;\"></div>\r\n                <div class=\"card-header d-flex align-items-center justify-content-between\">\r\n                    <h5 class=\"mb-0\">Product input</h5>\r\n                </div>\r\n                <div class=\"card-body\">\r\n                    <form @submit.prevent=\"makeUser\">\r\n                        <div class=\"row mb-3\">\r\n                            <label class=\"col-sm-2 col-form-label\" for=\"basic-default-name\">Name<b v-if=\"selected.id && !v$.name.$error\" style=\"color:yellow;\"> - updating</b><b v-if=\"v$.name.$error\" style=\"color:rgb(255,62,29)\"> - required</b></label>\r\n                            <div class=\"col-sm-10\">\r\n                                <input v-model=\"selected.name\" type=\"text\" class=\"form-control\" :class=\"[v$.name.$error ? 'is-invalid' : '']\" id=\"basic-default-name\" placeholder=\"John Doe\" />\r\n                                <span v-if=\"v$.name.$error\" style=\"color:red;\">{{v$.name.$errors[0].$message}}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3\">\r\n                            <label class=\"col-sm-2 col-form-label\" for=\"basic-default-name\">Email<b v-if=\"selected.id && !v$.email.$error\" style=\"color:yellow;\"> - updating</b><b v-if=\"v$.email.$error\" style=\"color:rgb(255,62,29)\"> - required</b></label>\r\n                            <div class=\"col-sm-10\">\r\n                                <input v-model=\"selected.email\" type=\"text\" class=\"form-control\" :class=\"[v$.email.$error ? 'is-invalid' : '']\" id=\"basic-default-name\" placeholder=\"John Doe\" />\r\n                                <span v-if=\"v$.email.$error\" style=\"color:red;\">{{v$.email.$errors[0].$message}}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3\">\r\n                            <label class=\"col-sm-2 col-form-label\" for=\"basic-default-name\">Password<b v-if=\"selected.id && !v$.password.$error\" style=\"color:yellow;\"> - updating</b><b v-if=\"v$.password.$error\" style=\"color:rgb(255,62,29)\"> - required</b></label>\r\n                            <div class=\"col-sm-10\">\r\n                                <input v-model=\"selected.password\" type=\"text\" class=\"form-control\" :class=\"[v$.password.$error ? 'is-invalid' : '']\" id=\"basic-default-name\" placeholder=\"John Doe\" />\r\n                                <span v-if=\"v$.password.$error\" style=\"color:red;\">{{v$.password.$errors[0].$message}}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row mb-3\">\r\n                            <label class=\"col-sm-2 col-form-label\" for=\"basic-default-name\">Is Moderator</label>\r\n                            <div class=\"col-sm-10\">\r\n                                <input v-model=\"selected.is_moderator\" type=\"checkbox\" class=\"dt-checkboxes form-check-input\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row justify-content-end\">\r\n                            <div class=\"col-sm-10\">\r\n                            <button class=\"btn btn-primary\">Send</button>\r\n                            <button @click=\"reset\" type=\"button\" class=\"btn btn-primary ms-2\">Reset</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"card pt-4\" v-if=\"users\">\r\n                <div class=\"card-datatable table-responsive\">\r\n                    <div id=\"DataTables_Table_0_wrapper\" class=\"dataTables_wrapper dt-bootstrap5 no-footer\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-sm-12 col-md-6\">\r\n                                <div class=\"dataTables_length\" id=\"DataTables_Table_0_length\">\r\n                                    <div class=\"row d-flex justify-content-center align-items-center\">\r\n                                        <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n                                            <label>Show</label>\r\n                                        </div>\r\n                                        <div class=\"col-4 d-flex justify-content-center align-items-center\">\r\n                                            <select v-model=\"page.perPage\" name=\"DataTables_Table_0_length\" aria-controls=\"DataTables_Table_0\" class=\"form-select\">\r\n                                                <option value=\"1\">1</option>\r\n                                                <option value=\"10\">10</option>\r\n                                                <option value=\"25\">25</option>\r\n                                                <option value=\"50\">50</option>\r\n                                                <option value=\"75\">75</option>\r\n                                                <option value=\"100\">100</option>\r\n                                            </select>\r\n                                        </div>\r\n                                        <div class=\"col-6 d-flex justify-content-start\" >\r\n                                            entries\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end\">\r\n                                <div id=\"DataTables_Table_0_filter\" class=\"dataTables_filter\">\r\n                                    <div class=\"row d-flex justify-content-center align-items-center\">\r\n                                        <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n                                            <label>Search:</label>\r\n                                        </div>\r\n                                        <div class=\"col-10\">\r\n                                            <input v-model=\"page.search\" v-debounce:400ms=\"searchUsers\" type=\"search\" class=\"form-control\" placeholder=\"\" aria-controls=\"DataTables_Table_0\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <table class=\"datatables-basic table border-top\">\r\n                        <thead>\r\n                            <tr>\r\n                            <th>id</th>\r\n                            <th @click=\"order\" class=\"d-flex justify-content-between\">Name <i style=\"color:rgb(187,195,204)\" :class=\"[page.orderBy ? 'bx bxs-chevron-up':'bx bxs-chevron-down']\"></i></th>\r\n                            <th>Email</th>\r\n                            <th>Role</th>\r\n                            <th>Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr v-for=\"user in users\" :key=\"user.id\">\r\n                                <td class=\"dt-checkboxes-cell\">\r\n                                    <input type=\"checkbox\" class=\"dt-checkboxes form-check-input\">\r\n                                </td>\r\n                                <td style=\"cursor:pointer;overflow:hidden;\">\r\n                                    <div class=\"d-flex justify-content-start align-items-center user-name\">\r\n                                        <div class=\"d-flex flex-column\" style=\"overflow:hidden;max-width:100px;\">\r\n                                            <span class=\"emp_name text-truncate\">{{user.name}}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                <td>{{user.email}}</td>\r\n                                <td>{{user.role}}</td>\r\n                                <td>\r\n                                    <a @click.prevent=\"deletE(user.id)\" class=\"btn btn-sm btn-icon item-edit\"><i class=\"bx bxs-trash\"></i></a>\r\n                                    <a @click.prevent=\"editE(user)\" href=\"javascript:;\" class=\"btn btn-sm btn-icon item-edit\"><i class=\"bx bxs-edit\"></i></a>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                        </table>\r\n                        <div class=\"row\" style=\"padding-left:40px;padding-top:20px;\">\r\n                            <div class=\"col-sm-12 col-md-6\">\r\n                                <div class=\"dataTables_info\" id=\"DataTables_Table_0_info\" role=\"status\" aria-live=\"polite\">Showing {{page.page}} to {{page.perPage}} of {{userCount}} products</div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 col-md-6\">\r\n                                <div class=\"dataTables_paginate paging_simple_numbers\" id=\"DataTables_Table_0_paginate\">\r\n                                    <ul class=\"pagination\">\r\n                                        <li class=\"paginate_button page-item previous\" :class=\"[page.page === 1 ? 'disabled' : '']\" id=\"DataTables_Table_0_previous\">\r\n                                            <a @click.prevent=\"previousPage\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"previous\" tabindex=\"0\" class=\"page-link\">Previous</a>\r\n                                        </li>\r\n                                        <li v-for=\"n in pagesCount\" :key=\"n\"  class=\"paginate_button page-item active\">\r\n                                            <a @click.prevent=\"changePage(n)\" v-show=\"n < page.page + 5 && page.page < n+2 && n != pagesCount\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"1\" tabindex=\"0\" class=\"page-link\" :style=\"[page.page == n ? 'background-color:rgb(105,108,255);color:white;' : 'background-color:rgb(240,242,244);color:rgb(105,122,141);']\">{{n}}</a>\r\n                                        </li>\r\n                                        <li v-if='pagesCount - page.page > 5' class=\"paginate_button page-item disabled\" id=\"DataTables_Table_0_ellipsis\">\r\n                                            <a href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"ellipsis\" tabindex=\"0\" class=\"page-link\">…</a>\r\n                                        </li>\r\n                                        <li class=\"paginate_button page-item \">\r\n                                            <a @click.prevent=\"changePage(pagesCount)\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"14\" tabindex=\"0\" class=\"page-link\" :style=\"[page.page === pagesCount ? 'background-color:rgb(105,108,255);color:white;' : 'background-color:rgb(240,242,244);color:rgb(105,122,141);']\">{{pagesCount}}</a>\r\n                                        </li>\r\n                                        <li class=\"paginate_button page-item next\" :class=\"[page.page === pagesCount ? 'disabled' : '']\" id=\"DataTables_Table_0_next\">\r\n                                            <a @click.prevent=\"nextPage\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"next\" tabindex=\"0\" class=\"page-link\">Next</a>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </template>\r\n\r\n\r\n<script setup>\r\nimport { ref,reactive,watch,onMounted } from 'vue'\r\nimport store from '../../store'\r\nimport router from '../../router'\r\nimport axios from 'axios'\r\nimport { useVuelidate } from '@vuelidate/core'\r\nimport { required,email } from '@vuelidate/validators'\r\nconst loading = ref(false)\r\nconst users = ref(false)\r\nconst pagesCount = ref('')\r\nconst userCount = ref('')\r\nconst url = store.state.api\r\nconst page = reactive({\r\n    page:1,\r\n    search:'',\r\n    perPage:'10',\r\n    order:false,\r\n    orderBy:true\r\n})\r\nwatch(()=>page.perPage,()=>{\r\n    page.page = 1\r\n    loadUsers()\r\n})\r\nconst selected = reactive({\r\n    name:'',\r\n    email:'',\r\n    password:'',\r\n    is_moderator:false,\r\n    id:null\r\n})\r\nconst rules = {\r\n    name:{required},\r\n    email:{required,email},\r\n    password:{required}\r\n}\r\nconst v$ = useVuelidate(rules,selected)\r\nonMounted(()=>{\r\n    if(store.state.user.data.length != 0){\r\n        if(store.state.user.data.role === 'moderator'){\r\n            router.push({name:'Product'})\r\n        }\r\n    }\r\n    loadUsers()\r\n})\r\nconst makeUser = () => {\r\n    if(loading.value){\r\n        return\r\n    }\r\n    v$.value.$validate()\r\n    if(v$.value.$error){\r\n        return\r\n    }\r\n    loading.value = true\r\n    store.dispatch('adduser',selected).then(async()=>{\r\n            page.order = false\r\n            await loadUsers()\r\n            loading.value = false\r\n        }).catch(()=>{\r\n            loading.value = false\r\n        })\r\n}\r\nconst loadUsers = async() => {\r\n    await axios.post(url+'loadusers',page,{\r\n                headers: {\r\n                    Authorization: 'Bearer '+localStorage.getItem('TOKEN')\r\n                }\r\n            }).then((response)=>{\r\n                users.value = response.data.users.data\r\n                pagesCount.value = response.data.last\r\n                userCount.value = response.data.count\r\n            })\r\n}\r\nconst reset = () => {\r\n    selected.name = ''\r\n    selected.email = ''\r\n    selected.password = ''\r\n    selected.id = false\r\n    selected.is_moderator = false\r\n    v$.value.$reset()\r\n}\r\nconst deletE = async(id) => {\r\n    if(window.confirm('Are you sure?')){\r\n        await axios.post(url+'deleteuser/'+id,null,{\r\n                headers: {\r\n                    Authorization: 'Bearer '+localStorage.getItem('TOKEN')\r\n                }\r\n            }).then((repsonse)=>{\r\n                alert(repsonse.data.message)\r\n                loadUsers()\r\n            }).catch((error)=>{\r\n                alert(error.response.data.message)\r\n            })\r\n    }\r\n}\r\nconst editE = (user) => {\r\n    reset()\r\n    selected.id = user.id\r\n    selected.name = user.name\r\n    selected.email = user.email\r\n    if(user.role === 'moderator'){\r\n        selected.is_moderator = true\r\n    }\r\n}\r\nconst changePage = (n) => {\r\n    page.page = n\r\n    loadUsers()\r\n}\r\nconst searchUsers = () => {\r\n    page.page = 1\r\n    loadUsers()\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    \r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}