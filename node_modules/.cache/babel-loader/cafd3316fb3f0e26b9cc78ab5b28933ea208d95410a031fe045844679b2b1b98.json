{"ast":null,"code":"import { ref, reactive, watch, onMounted } from 'vue';\nimport store from '../../store';\nimport router from '../../router';\nimport axios from 'axios';\nexport default {\n  __name: 'Order',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const loading = ref(false);\n    const orders = ref(false);\n    const preview = ref(false);\n    const pagesCount = ref('');\n    const userCount = ref('');\n    const url = store.state.api;\n    const previewMaterial = reactive({\n      products: []\n    });\n    const page = reactive({\n      page: 1,\n      search: '',\n      perPage: '10'\n    });\n    watch(() => page.perPage, () => {\n      page.page = 1;\n      loadOrders();\n    });\n    onMounted(() => {\n      loadOrders();\n    });\n    const loadOrders = async () => {\n      await axios.post(url + 'loadorders', page, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('TOKEN')\n        }\n      }).then(response => {\n        orders.value = response.data.orders.data;\n        pagesCount.value = response.data.last;\n        userCount.value = response.data.count;\n      });\n    };\n    const searchOrders = () => {\n      page.page = 1;\n      loadOrders();\n    };\n    const showPreview = order => {\n      preview.value = true;\n      previewMaterial.products = order.products;\n    };\n    const closePreview = () => {\n      preview.value = false;\n      previewMaterial.products = [];\n    };\n    const changePage = n => {\n      page.page = n;\n      loadOrders();\n    };\n    const getPrice = pr => {\n      return (pr / 100).toLocaleString('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      });\n    };\n    const __returned__ = {\n      loading,\n      orders,\n      preview,\n      pagesCount,\n      userCount,\n      url,\n      previewMaterial,\n      page,\n      loadOrders,\n      searchOrders,\n      showPreview,\n      closePreview,\n      changePage,\n      getPrice,\n      ref,\n      reactive,\n      watch,\n      onMounted,\n      get store() {\n        return store;\n      },\n      get router() {\n        return router;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","watch","onMounted","store","router","axios","loading","orders","preview","pagesCount","userCount","url","state","api","previewMaterial","products","page","search","perPage","loadOrders","post","headers","Authorization","localStorage","getItem","then","response","value","data","last","count","searchOrders","showPreview","order","closePreview","changePage","n","getPrice","pr","toLocaleString","style","currency"],"sources":["C:/xampp/htdocs/vue-laravel-admin/admin-panel/src/views/admin/Order.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-xxl flex-grow-1 container-p-y\">\r\n        <h4 class=\"fw-bold py-3 mb-4\">Orders</h4>\r\n        <div class=\"card pt-4\">\r\n                <div class=\"card-datatable table-responsive\">\r\n                    <div id=\"DataTables_Table_0_wrapper\" class=\"dataTables_wrapper dt-bootstrap5 no-footer\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-sm-12 col-md-6\">\r\n                                <div class=\"dataTables_length\" id=\"DataTables_Table_0_length\">\r\n                                    <div class=\"row d-flex justify-content-center align-items-center\">\r\n                                        <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n                                            <label>Show</label>\r\n                                        </div>\r\n                                        <div class=\"col-4 d-flex justify-content-center align-items-center\">\r\n                                            <select v-model=\"page.perPage\" name=\"DataTables_Table_0_length\" aria-controls=\"DataTables_Table_0\" class=\"form-select\">\r\n                                                <option value=\"1\">1</option>\r\n                                                <option value=\"10\">10</option>\r\n                                                <option value=\"25\">25</option>\r\n                                                <option value=\"50\">50</option>\r\n                                                <option value=\"75\">75</option>\r\n                                                <option value=\"100\">100</option>\r\n                                            </select>\r\n                                        </div>\r\n                                        <div class=\"col-6 d-flex justify-content-start\" >\r\n                                            entries\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end\">\r\n                                <div id=\"DataTables_Table_0_filter\" class=\"dataTables_filter\">\r\n                                    <div class=\"row d-flex justify-content-center align-items-center\">\r\n                                        <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n                                            <label>Search:</label>\r\n                                        </div>\r\n                                        <div class=\"col-10\">\r\n                                            <input v-model=\"page.search\" v-debounce:400ms=\"searchOrders\" type=\"search\" class=\"form-control\" placeholder=\"\" aria-controls=\"DataTables_Table_0\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <table class=\"datatables-basic table border-top\">\r\n                        <thead>\r\n                            <tr>\r\n                            <th>id</th>\r\n                            <th>User</th>\r\n                            <th>Product</th>\r\n                            <th>Trasnaction_id</th>\r\n                            <th>Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody v-if=\"orders\">\r\n                            <tr v-for=\"or in orders\" :key=\"or.id\">\r\n                                <td class=\"dt-checkboxes-cell\">\r\n                                    <input type=\"checkbox\" class=\"dt-checkboxes form-check-input\">\r\n                                </td>\r\n                                <td style=\"cursor:pointer;overflow:hidden;\">\r\n                                    <div class=\"d-flex justify-content-start align-items-center user-name\">\r\n                                        <div class=\"d-flex flex-column\" style=\"overflow:hidden;max-width:150px;\">\r\n                                            <span class=\"emp_name text-truncate\">{{or.user.email}}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                <td @click=\"showPreview(or)\" style=\"cursor:pointer;\">View <i class=\"bx bx-right-top-arrow-circle\"></i></td>\r\n                                <td>{{or.transaction_id}}</td>\r\n                                <td>{{or.date}}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                        </table>\r\n                        <div class=\"row\" style=\"padding-left:40px;padding-top:20px;\">\r\n                            <div class=\"col-sm-12 col-md-6\">\r\n                                <div class=\"dataTables_info\" id=\"DataTables_Table_0_info\" role=\"status\" aria-live=\"polite\">Showing {{page.page}} to {{page.perPage}} of {{userCount}} products</div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 col-md-6\">\r\n                                <div class=\"dataTables_paginate paging_simple_numbers\" id=\"DataTables_Table_0_paginate\">\r\n                                    <ul class=\"pagination\">\r\n                                        <li class=\"paginate_button page-item previous\" :class=\"[page.page === 1 ? 'disabled' : '']\" id=\"DataTables_Table_0_previous\">\r\n                                            <a @click.prevent=\"previousPage\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"previous\" tabindex=\"0\" class=\"page-link\">Previous</a>\r\n                                        </li>\r\n                                        <li v-for=\"n in pagesCount\" :key=\"n\"  class=\"paginate_button page-item active\">\r\n                                            <a @click.prevent=\"changePage(n)\" v-show=\"n < page.page + 5 && page.page < n+2 && n != pagesCount\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"1\" tabindex=\"0\" class=\"page-link\" :style=\"[page.page == n ? 'background-color:rgb(105,108,255);color:white;' : 'background-color:rgb(240,242,244);color:rgb(105,122,141);']\">{{n}}</a>\r\n                                        </li>\r\n                                        <li v-if='pagesCount - page.page > 5' class=\"paginate_button page-item disabled\" id=\"DataTables_Table_0_ellipsis\">\r\n                                            <a href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"ellipsis\" tabindex=\"0\" class=\"page-link\">â€¦</a>\r\n                                        </li>\r\n                                        <li class=\"paginate_button page-item \">\r\n                                            <a @click.prevent=\"changePage(pagesCount)\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"14\" tabindex=\"0\" class=\"page-link\" :style=\"[page.page === pagesCount ? 'background-color:rgb(105,108,255);color:white;' : 'background-color:rgb(240,242,244);color:rgb(105,122,141);']\">{{pagesCount}}</a>\r\n                                        </li>\r\n                                        <li class=\"paginate_button page-item next\" :class=\"[page.page === pagesCount ? 'disabled' : '']\" id=\"DataTables_Table_0_next\">\r\n                                            <a @click.prevent=\"nextPage\" href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"next\" tabindex=\"0\" class=\"page-link\">Next</a>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n         <div v-if=\"preview\" class=\"container fixed-top fixed-bottom d-flex justify-content-center align-items-center\">\r\n                <div class=\"card text-center position-relative shadow-lg\" style=\"width:70%;height:80%\">\r\n                    <button @click=\"closePreview\" type=\"button\" class=\"btn btn-primary me-4 close position-absolute top-0 end-0 m-3\" aria-label=\"Close\">X</button>\r\n                    <div class=\"card-body scroll-magic\" style=\"overflow:scroll;\">\r\n                        <h3 class=\"card-title\">Products</h3>\r\n                        <div class=\"row\">\r\n                            <div class=\"col\">\r\n                                Product Name\r\n                            </div>\r\n                            <div class=\"col\">\r\n                                Total\r\n                            </div>\r\n                        </div>\r\n                        <div v-for=\"pr in previewMaterial.products\" :key=\"pr.id\" class=\"row\">\r\n                            <div class=\"col\">\r\n                                {{pr.name}}\r\n                            </div>\r\n                            <div v-text=\"getPrice(pr.pivot.quantity * pr.price)\" class=\"col\">\r\n                            </div>\r\n                        </div>\r\n                        <div style=\"border-bottom: 1px solid black;margin:5px 0px;\"></div>\r\n                        <div class=\"row mt-auto\">\r\n                            <div class=\"col\">\r\n                            </div>\r\n                            <div v-text=\"getPrice(previewMaterial.products.reduce((acc,item)=>acc + (item.pivot.quantity * item.price),0))\" class=\"col\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { ref,reactive,watch,onMounted } from 'vue'\r\nimport store from '../../store'\r\nimport router from '../../router'\r\nimport axios from 'axios'\r\nconst loading = ref(false)\r\nconst orders = ref(false)\r\nconst preview = ref(false)\r\nconst pagesCount = ref('')\r\nconst userCount = ref('')\r\nconst url = store.state.api\r\nconst previewMaterial = reactive({\r\n    products:[]\r\n})\r\nconst page = reactive({\r\n    page:1,\r\n    search:'',\r\n    perPage:'10'\r\n})\r\nwatch(()=>page.perPage,()=>{\r\n    page.page = 1\r\n    loadOrders()\r\n})\r\nonMounted(()=>{\r\n    loadOrders()\r\n})\r\nconst loadOrders = async() => {\r\n    await axios.post(url+'loadorders',page,{\r\n                headers: {\r\n                    Authorization: 'Bearer '+localStorage.getItem('TOKEN')\r\n                }\r\n            }).then((response)=>{\r\n                orders.value = response.data.orders.data\r\n                pagesCount.value = response.data.last\r\n                userCount.value = response.data.count\r\n            })\r\n}\r\nconst searchOrders = () => {\r\n    page.page = 1\r\n    loadOrders()\r\n}\r\nconst showPreview = (order) => {\r\n    preview.value = true\r\n    previewMaterial.products = order.products\r\n}\r\nconst closePreview = () => {\r\n    preview.value = false\r\n    previewMaterial.products = []\r\n}\r\nconst changePage = (n) => {\r\n    page.page = n\r\n    loadOrders()\r\n}\r\nconst getPrice = (pr) => {\r\n    return (pr / 100).toLocaleString('en-US',{style:'currency',currency:'USD'});\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    \r\n</style>\r\n"],"mappings":"AAsIA,SAASA,GAAG,EAACC,QAAQ,EAACC,KAAK,EAACC,SAAS,QAAQ,KAAK;AAClD,OAAOC,KAAK,MAAM,aAAa;AAC/B,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,KAAK,MAAM,OAAO;;;;;;;IACzB,MAAMC,OAAO,GAAGP,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMQ,MAAM,GAAGR,GAAG,CAAC,KAAK,CAAC;IACzB,MAAMS,OAAO,GAAGT,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMU,UAAU,GAAGV,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMW,SAAS,GAAGX,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMY,GAAG,GAAGR,KAAK,CAACS,KAAK,CAACC,GAAG;IAC3B,MAAMC,eAAe,GAAGd,QAAQ,CAAC;MAC7Be,QAAQ,EAAC;IACb,CAAC,CAAC;IACF,MAAMC,IAAI,GAAGhB,QAAQ,CAAC;MAClBgB,IAAI,EAAC,CAAC;MACNC,MAAM,EAAC,EAAE;MACTC,OAAO,EAAC;IACZ,CAAC,CAAC;IACFjB,KAAK,CAAC,MAAIe,IAAI,CAACE,OAAO,EAAC,MAAI;MACvBF,IAAI,CAACA,IAAI,GAAG,CAAC;MACbG,UAAU,CAAC,CAAC;IAChB,CAAC,CAAC;IACFjB,SAAS,CAAC,MAAI;MACViB,UAAU,CAAC,CAAC;IAChB,CAAC,CAAC;IACF,MAAMA,UAAU,GAAG,MAAAA,CAAA,KAAW;MAC1B,MAAMd,KAAK,CAACe,IAAI,CAACT,GAAG,GAAC,YAAY,EAACK,IAAI,EAAC;QAC3BK,OAAO,EAAE;UACLC,aAAa,EAAE,SAAS,GAACC,YAAY,CAACC,OAAO,CAAC,OAAO;QACzD;MACJ,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAG;QAChBnB,MAAM,CAACoB,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACrB,MAAM,CAACqB,IAAI;QACxCnB,UAAU,CAACkB,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACC,IAAI;QACrCnB,SAAS,CAACiB,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACE,KAAK;MACzC,CAAC,CAAC;IACd,CAAC;IACD,MAAMC,YAAY,GAAGA,CAAA,KAAM;MACvBf,IAAI,CAACA,IAAI,GAAG,CAAC;MACbG,UAAU,CAAC,CAAC;IAChB,CAAC;IACD,MAAMa,WAAW,GAAIC,KAAK,IAAK;MAC3BzB,OAAO,CAACmB,KAAK,GAAG,IAAI;MACpBb,eAAe,CAACC,QAAQ,GAAGkB,KAAK,CAAClB,QAAQ;IAC7C,CAAC;IACD,MAAMmB,YAAY,GAAGA,CAAA,KAAM;MACvB1B,OAAO,CAACmB,KAAK,GAAG,KAAK;MACrBb,eAAe,CAACC,QAAQ,GAAG,EAAE;IACjC,CAAC;IACD,MAAMoB,UAAU,GAAIC,CAAC,IAAK;MACtBpB,IAAI,CAACA,IAAI,GAAGoB,CAAC;MACbjB,UAAU,CAAC,CAAC;IAChB,CAAC;IACD,MAAMkB,QAAQ,GAAIC,EAAE,IAAK;MACrB,OAAO,CAACA,EAAE,GAAG,GAAG,EAAEC,cAAc,CAAC,OAAO,EAAC;QAACC,KAAK,EAAC,UAAU;QAACC,QAAQ,EAAC;MAAK,CAAC,CAAC;IAC/E,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}